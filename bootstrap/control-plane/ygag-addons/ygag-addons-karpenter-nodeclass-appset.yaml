---
apiVersion: karpenter.k8s.aws/v1beta1
kind: EC2NodeClass
metadata:
  name: configuration
spec:
  amiFamily: AL2
  subnetSelectorTerms:          # good tohave tag on subnets
    - id: "subnet-0bcfc4f49a11f309b"
    - id: "subnet-0f49ee7cefff97711"
    - id: "subnet-0d5278ad6b434f907"
  # required, discovers security groups to attach to instances
  securityGroupSelectorTerms: # see if we can add tags on created subnets
    - tags:
        "Name": "ygg-sandbox-pt-node" 
  role: {{ app.data.role }}
  # amiSelectorTerms:             
  #   - tags:
  #       karpenter.sh/discovery: "ygag-blueprint-cluster"  

  # optional, propagates tags to underlying EC2 resources
  tags:                  
    class: configuration
    Name: karpenter.sh/nodepool/configuration